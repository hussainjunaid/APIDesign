## Group Accounts

## Accounts Collection [/accounts]
Accounts endpoint allows you to list / view all the accounts of the logged in customer. This includes energy accounts, services accounts, multi premise landlord accounts and sales orders of OAM registered and wafer thin profile customers. Responses from this endpoint will be retuned in JSON format only.

### Account
Account as a resource represents following information

| Property | Type | As request | As response | Description |
| :-------------------- | :---------- | :----------| :---------- | ------------------------------------------------------------ |
| id | string | `Not applicable` | `Returned always` | Account number or Sales Order number of the account is considered as the unique identifier |
| holderName | string | `Not applicable` | `Returned always` | Name of the account holder if available. |
| multiPremiseLandlord | boolean | `Not applicable` | `Returned always` | `true` if the account holder is a multi premise landlord, `false` otherwise. |
| status | string | `Not applicable` | `Returned always` | Status of the account if available. Possible values are `open`, `pending`, `closed`, `submitted`, `cancelled`, `complete`, `incomplete`, `locked`, `deactive`, `inprogress`, `new`, `processed`, `wafer` and `unknown`.|
| type | string | `Not applicable` | `Returned always` | Type of the account, this will be Energy, Services or Order. |
| subType | string | `Not applicable` | `Returned always` | Subtype of the account, this will be Electricity, Gas or Dual for Energy accounts and Sales orders, Home Services or Security for Services account. |
| responsibilityType | string | `Not applicable` | `Returned always` | Responsibility type of the account if available. Possible values are `Legal Payer`, `Contract Owner` and `Other Contract Owner`. |
| supplyAddress | Address | `Not applicable` | `Returned always` | Address of the customer if available. MPAN and MPRN is null, as these values are not available for the address in backend. |

####Address
[click here](/api-reference/addresses.md#address) to refer address resource details.

### Retrieve a specific Account [GET /accounts/{id}]
+ Parameters

    + id: 12345678 (string, required) - Account number or Sales Order number of the account is considered as the unique identifier

+ Request 'SUCCESS'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "account": {
                        "id": "850007026968",
                        "holderName": "Mr W Grady",
                        "status": "open",
                        "type": "Energy",
                        "subType": "Gas",
                        "responsibilityType": "Legal Payer",
                        "supplyAddress": {
                            "address": "44, Rydal Road, Chester Le Street, County Durham, DH2 3DR",
                            "houseNumber": "44",
                            "flatNumber": null,
                            "houseName": "",
                            "addressLine1": "RYDAL ROAD",
                            "addressLine2": "",
                            "postalTown": "CHESTER LE STREET",
                            "county": "COUNTY DURHAM",
                            "postcode": "DH2 3DR",
                            "MPAN": null,
                            "MPRN": "1347435507"
                        }
                    }
                },
                "errors": [],
                "meta": {}
            }

+ Request 'Issued token is not valid'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 401 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [{
                    "code": "authorize",
                    "message": "invalid_request"
                }],
                "meta": {}
            }

+ Request 'Valid token without 'Bearer' key'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 401 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [{
                    "code": "authorize",
                    "message": "access_denied"
                }],
                "meta": {}
            }

+ Request 'Account is not available for the customer'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 404 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [{
                    "code": "accountNumber",
                    "message": "error.client.account.notfound"
                }],
                "meta": {}
            }

### Retrieve all Accounts [GET /accounts]

+ Request 'Success'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "accounts": [
                        {
                            "id": "850007026968",
                            "holderName": "Mr W Grady",
                            "status": "open",
                            "type": "Energy",
                            "subType": "Gas",
                            "responsibilityType": "Legal Payer",
                            "supplyAddress": {
                                "address": "44, Rydal Road, Chester Le Street, County Durham, DH2 3DR",
                                "houseNumber": "44",
                                "flatNumber": null,
                                "houseName": "",
                                "addressLine1": "RYDAL ROAD",
                                "addressLine2": "",
                                "postalTown": "CHESTER LE STREET",
                                "county": "COUNTY DURHAM",
                                "postcode": "DH2 3DR",
                                "MPAN": null,
                                "MPRN": "1347435507"
                            }
                        },
                        {
                            "id": "850010579253",
                            "holderName": "Mr W Grady",
                            "status": "open",
                            "type": "Energy",
                            "subType": "Electricity",
                            "responsibilityType": "Legal Payer",
                            "supplyAddress": {
                                "address": "44, Rydal Road, Chester Le Street, County Durham, DH2 3DR",
                                "houseNumber": "44",
                                "flatNumber": null,
                                "houseName": "",
                                "addressLine1": "RYDAL ROAD",
                                "addressLine2": "",
                                "postalTown": "CHESTER LE STREET",
                                "county": "COUNTY DURHAM",
                                "postcode": "DH2 3DR",
                                "MPAN": "1591027022630",
                                "MPRN": null
                            }
                        }
                    ]
                },
                "errors": [],
                "meta": {}
            }

+ Request 'Issued token is not valid'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 401 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [{
                    "code": "authorize",
                    "message": "invalid_request"
                }],
                "meta": {}
            }

+ Request 'Valid token without 'Bearer' key'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 401 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [{
                    "code": "authorize",
                    "message": "access_denied"
                }],
                "meta": {}
            }
