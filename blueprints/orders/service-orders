## Service Orders [/service-orders]
Service Order represents information about the smart meter installation for the premises and appointment details.

#### Service Order

Service order as a resource has the following attributes:

| Name | Type | As request | As response | Description |
| :--- | :----- | ------ |-------|------------------------------------- |
| id | String | `Optional` | `Returned always` | 64-bit encrypted service order number|
| appointmentSlot | String| `Mandatory` Slot id is a unique value which is used to identify the select appointment slot from appointment list|
|startDate| String | `Optional` | returned when appointment is available | Appointment start time and date |
|startTime| String |`Optional` | returned when appointment is available | Appointment start time and date |
|endDate| String |`Optional` | returned when appointment is available | Appointment end time and date |
|endTime| String |`Optional` | returned when appointment is available| Appointment end time and date |
| status | String | `Optional` | `Returned always` | This is to identify if the request formed is for a new appointment or reschedule/cancel an existing appointment. This would take value `CANCEL` or `RESCHEDULE` accordingly. If empty, it would be considered as new appointment|
|fuelType|String|`Optional` | `Returned always` | used to identify the fuel type of the service order as `gas`, `electricity` or `dual`|
|contactNumber|String|`Optional`| `Returned always` | customer contact number.|
|specialInstruction|String|`Optional`| `optional` | additional information related to smart meter installation for this service order|
|meterType|String|`Mandatory`| `Returned always` | It is used to identify the meter type as `credit` or `prepay`|
|accounts|String[]|`Optional`| `Optional` | Array of account associated the service order.|
| address | [Address](/api-reference/addresses.md#address) | `Mandatory` | `Returned always` |complete details of the address. `addressLine1`, `addressLine1`, `county`, `MPAN` and `MPRN` fields are 'optional'. Any one of the field is mandatory - `houseName` or `houseNumber` or `flatNumber`|

Service Order allows the client to create and modify an appointment for a smart meter exchange

### Retrieve service orders anonymously [GET /service-orders?{prospectToken}]

+ Parameters

    + prospectToken: qwew-23424 (string, required) - Prospect token for the anonymous customer

+ Request 'SUCCESS' (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "serviceOrders": [
                        {
                            "id": "QkM5Qm40ZzV1TDlxZUl6cXd4TUwxZz09",
                            "appointmentSlot": "1-2015-10-11T08:00:00+0100-2015-10-11T10:00:00+0100",
                            "startDate": null,
                            "startTime": null,
                            "endDate": null,
                            "endTime": null,
                            "status": "new",
                            "accounts": null,
                            "fuelType": "dual",
                            "contactNumber": "",
                            "specialInstruction": "",
                            "meterType": "prepay",
                            "address": {
                                "address": null,
                                "houseNumber": "17",
                                "flatNumber": null,
                                "houseName": null,
                                "addressLine1": "Beresford Avenue",
                                "addressLine2": null,
                                "postalTown": "Surbiton",
                                "county": "SURREY",
                                "postcode": "CM16 6RE ",
                                "MPAN": null,
                                "MPRN": null
                            }
                        }
                    ]
                },
                "errors": [],
                "meta": {}
            }

### Retrieve service orders for logged in customer [GET /service-orders]

+ Request 'SUCCESS' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "serviceOrders": [
                        {
                            "id": "QkM5Qm40ZzV1TDlxZUl6cXd4TUwxZz09",
                            "appointmentSlot": "1-2015-10-11T08:00:00+0100-2015-10-11T10:00:00+0100",
                            "startDate": null,
                            "startTime": null,
                            "endDate": null,
                            "endTime": null,
                            "status": "new",
                            "accounts": null,
                            "fuelType": "dual",
                            "contactNumber": "",
                            "specialInstruction": "",
                            "meterType": "prepay",
                            "address": {
                                "address": null,
                                "houseNumber": "17",
                                "flatNumber": null,
                                "houseName": null,
                                "addressLine1": "Beresford Avenue",
                                "addressLine2": null,
                                "postalTown": "Surbiton",
                                "county": "SURREY",
                                "postcode": "CM16 6RE ",
                                "MPAN": null,
                                "MPRN": null
                            }
                        }
                    ]
                },
                "errors": [],
                "meta": {}
            }

+ Request 'Prospect token is blank or empty (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 403 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "prospectToken",
                        "message": "error.client.token.invalid"
                    }
                ],
                "meta": {}
            }

+ Request 'Unable to get service order' (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 500 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "server.error.internal",
                        "message": "An internal error while processing request."
                    }
                ],
                "meta": {}
            }

### Retrieve a specific service order for logged in customer [GET /service-orders/{id}]

+ Parameters

    + id: 1234 (string,required) - Service order id

+ Request 'SUCCESS' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "serviceOrder": {
                        "id": "QkM5Qm40ZzV1TDlxZUl6cXd4TUwxZz09",
                        "appointmentSlot": "1-2015-10-11T08:00:00+0100-2015-10-11T10:00:00+0100",
                        "startDate": null,
                        "startTime": null,
                        "endDate": null,
                        "endTime": null,
                        "status": "new",
                        "accounts": null,
                        "fuelType": "dual",
                        "contactNumber": "",
                        "specialInstruction": "",
                        "meterType": "prepay",
                        "address": {
                            "address": null,
                            "houseNumber": "17",
                            "flatNumber": null,
                            "houseName": null,
                            "addressLine1": "Beresford Avenue",
                            "addressLine2": null,
                            "postalTown": "Surbiton",
                            "county": "SURREY",
                            "postcode": "CM16 6RE ",
                            "MPAN": null,
                            "MPRN": null
                        }
                    }
                },
                "errors": [],
                "meta": {}
            }

+ Request 'Customer not authenticated' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 401 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "authorize",
                        "message": "access_denied"
                    }
                ],
                "meta": {}
            }

+ Request 'Service order not found' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 404 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "serviceOrder",
                        "message": "error.client.serviceOrder.notfound"
                    }
                ],
                "meta": {}
            }

+ Request 'Unable to get service order' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 500 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "server.error.internal",
                        "message": "An internal error while processing request."
                    }
                ],
                "meta": {}
            }

### Retrieve a specific service order anonymously [GET /service-orders/{id}{?token}]

+ Parameters

    + id: 1234(string,required) - Service order id
    + token: qwe3-24324 (string,required) - prospect token

+ Request 'SUCCESS' (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "serviceOrder": {
                        "id": "QkM5Qm40ZzV1TDlxZUl6cXd4TUwxZz09",
                        "appointmentSlot": "1-2015-10-11T08:00:00+0100-2015-10-11T10:00:00+0100",
                        "startDate": null,
                        "startTime": null,
                        "endDate": null,
                        "endTime": null,
                        "status": "new",
                        "accounts": null,
                        "fuelType": "dual",
                        "contactNumber": "",
                        "specialInstruction": "",
                        "meterType": "prepay",
                        "address": {
                            "address": null,
                            "houseNumber": "17",
                            "flatNumber": null,
                            "houseName": null,
                            "addressLine1": "Beresford Avenue",
                            "addressLine2": null,
                            "postalTown": "Surbiton",
                            "county": "SURREY",
                            "postcode": "CM16 6RE ",
                            "MPAN": null,
                            "MPRN": null
                        }
                    }
                },
                "errors": [],
                "meta": {}
            }

+ Request 'Prospect token is blank or empty (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 403 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "prospectToken",
                        "message": "error.client.token.invalid"
                    }
                ],
                "meta": {}
            }

+ Request 'Service order not found' (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 404 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "serviceOrder",
                        "message": "error.client.serviceOrder.notfound"
                    }
                ],
                "meta": {}
            }

+ Request 'Unable to get service order' (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 500 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "server.error.internal",
                        "message": "An internal error while processing request."
                    }
                ],
                "meta": {}
            }

### Create a service order [POST /service-orders]

+ Request 'SUCCESS' (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

    + Body

            {
                "serviceOrder": {
                    "id": null,
                    "startDate": null,
                    "endDate": null,
                    "startTime": null,
                    "endTime": null,
                    "status": null,
                    "accounts": null,
                    "address": {
                        "address": null,
                        "houseNumber": "17",
                        "flatNumber": null,
                        "houseName": null,
                        "addressLine1": "Beresford Avenue",
                        "addressLine2": null,
                        "postalTown": "Surbiton",
                        "county": "SURREY",
                        "postcode": "KT5 9LH",
                        "MPAN": null,
                        "MPRN": null
                    },
                    "contactNumber": "",
                    "specialInstruction": "",
                    "fuelType": "dual",
                    "meterType": "prepay"
                },
                "meta": {
                    "prospectToken": "66df1707-6674-5235-802c-0f54b52e805c"
                }
            }

+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "serviceOrder": {
                        "id": "Ynp1Z1ZNcTF3VGRJa0ZOaXFIcENaQT09",
                        "startDate": null,
                        "startTime": null,
                        "endDate": null,
                        "endTime": null,
                        "status": null,
                        "accounts": null,
                        "fuelType": "dual",
                        "contactNumber": "",
                        "specialInstruction": "",
                        "meterType": "SM",
                        "address": {
                            "address": null,
                            "houseNumber": "17",
                            "flatNumber": null,
                            "houseName": null,
                            "addressLine1": "Beresford Avenue",
                            "addressLine2": null,
                            "postalTown": "Surbiton",
                            "county": "SURREY",
                            "postcode": "KT5 9LH",
                            "MPAN": null,
                            "MPRN": null
                        }
                    }
                },
                "errors": [],
                "meta": {}
            }

+ Request 'Input validation' (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 400 (application/json)

        {
            "status": "FAIL",
            "data": {}
            "errors": [
                {
                    "code": "fuelType",
                    "message": "error.client.fuelType.blank"
                }
            ],
            "meta": {}
        }

+ Request 'Unable to create a service order' (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 500 (application/json)

            {
                "status": "ERROR",
                "data": {},
                "errors": [
                    {
                        "code": "server.error.internal",
                        "message": "An internal error while processing request."
                    }
                ],
                "meta": {}
            }

### Modify service order anonymously [PUT /service-orders/{serviceOrderId}]

+ Parameters

    + serviceOrderId: 1234 (string, required) - Id of Service Order to be modified

+ Request 'SUCCESS' (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

    + Body

            {
                "serviceOrder": {
                    "id": "QkM5Qm40ZzV1TDlxZUl6cXd4TUwxZz09",
                    "startDate": null,
                    "endDate": null,
                    "startTime": null,
                    "endTime": null,
                    "appointmentSlot": "1-2015-10-11T08:00:00+0100-2015-10-11T10:00:00+0100",
                    "status": "new",
                    "accounts": null,
                    "address": {
                        "address": null,
                        "houseNumber": "17",
                        "flatNumber": null,
                        "houseName": null,
                        "addressLine1": "Beresford Avenue",
                        "addressLine2": null,
                        "postalTown": "Surbiton",
                        "county": "SURREY",
                        "postcode": "CM16 6RE ",
                        "MPAN": null,
                        "MPRN": null
                    },
                    "contactNumber": "",
                    "specialInstruction": "",
                    "fuelType": "dual",
                    "meterType": "prepay"
                },
                "meta": {
                    "prospectToken": "60e7f8c3-cb6c-53d7-87a9-ff7c3fa716a1"
                }
            }


+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "serviceOrder": {
                        "id": "QkM5Qm40ZzV1TDlxZUl6cXd4TUwxZz09",
                        "startDate": null,
                        "endDate": null,
                        "startTime": null,
                        "endTime": null,
                        "appointmentSlot": "1-2015-10-11T08:00:00+0100-2015-10-11T10:00:00+0100",
                        "status": "new",
                        "accounts": null,
                        "address": {
                            "address": null,
                            "houseNumber": "17",
                            "flatNumber": null,
                            "houseName": null,
                            "addressLine1": "Beresford Avenue",
                            "addressLine2": null,
                            "postalTown": "Surbiton",
                            "county": "SURREY",
                            "postcode": "CM16 6RE ",
                            "MPAN": null,
                            "MPRN": null
                        },
                        "contactNumber": "",
                        "specialInstruction": "",
                        "fuelType": "dual",
                        "meterType": "prepay"
                    }
                },
                "errors": [],
                "meta": {}
            }

+ Request 'Service order id is blank or empty' (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 403 (application/json)

        {
            "status": "FAIL",
            "data": {}
            "errors": [
                {
                    "code": "serviceorder",
                    "message": "error.server.serviceorder.isEmpty"
                }
            ],
            "meta": {}
        }

+ Request ' Service order id in request does not match with the one in URL' (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 403 (application/json)

        {
            "status": "FAIL",
            "data": {}
            "errors": [
                {
                    "code": "serviceorder",
                    "message": "error.server.serviceorder.isEmpty"
                }
            ],
            "meta": {}
        }

+ Request 'appointmentSlot sent in the request is invalid' (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 403 (application/json)

        {
            "status": "FAIL",
            "data": {}
            "errors": [
                {
                    "code": "serviceorder",
                    "message": "error.server.serviceorder.isEmpty"
                }
            ],
            "meta": {}
        }

+ Request 'Unable to update service order' (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 500 (application/json)

        {
            "status": "ERROR",
            "data": {}
            "errors": [
                {
                    "code": "server.error.internal",
                    "message": "An internal error while processing request."
                }
            ],
            "meta": {}
        }
