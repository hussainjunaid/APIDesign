## Group Prospects

## Prospects Collection [/prospects]
Prospect API allows the user to validate the customer details and create or retrieve the existing UCRN & BP number depending on the classification value sent as part of the request.
If the classification value sent is 'Smart',then UCRN & BP number will be created for the customer details passed as part of request.If the customer details are already available, then existing UCRN and BP will be returned.
If the classification value sent as part of the request is 'CHI', then the customer details will be validated and stored in the Memcache.

#### Prospect

| Name | Type | As request | As response | Description |
| :---------- | :------ | -------- |---------|------------------------------------ |
| id | string | `Optional` | `Returned always` | Encrypted UCRN value is set as id.Memcache Token key will be set as an id for the classification 'chi' |
| title | string | `Mandatory` | `Returned always` | Title of the customer. |
| firstName | string | `Mandatory` | `Returned always` |  First name of the customer. |
| surname | string | `Mandatory` | `Returned always` |  Surname of the customer. |
| emailAddress | string | `Mandatory` | `Returned always` |  Email address of the customer. |
| primaryTelephoneNumber | TelephoneNumber | `Mandatory` | `Returned always` |  Primary telephone number of the customer. |
| postcode | string | `Mandatory` | `Returned always` |  Postcode of customer's address. |
| correspondenceAddress | [Address](/api-reference/addresses.md#addresses) | `Mandatory` | `Returned always` |  Address details of the customer. |
| smartMeterInterest | Boolean | `Mandatory` | `Returned always` |  While creating a prospect the value should be false. This will be updated accordingly on /PUT operation |
| classification | string | `mandatory` | `Returned always` |classification value will be sent either as 'smart' or 'chi' depending on the targeted back end system.|

#### TelephoneNumber

| Name | Type | As request | As response | Description |
| :---------- | :------ | -------- |---------|------------------------------------ |
| number | string | `Mandatory`| `Returned always` | Valid Telephone number applicable. |
| type | string | `Optional` | `Returned always` |Telephone number type, it can be `home`, `work`, `mobile`|

### Create prospect [POST /prospects]
This controller service is used to create or retrieve the existing UCRN and Busines Partner (BP) in SAP for the anonymous customer. UI needs to give the following information as a request. The request body of this post must be a JSON object with properties listed below.

+ Request Case 1:  When the classification value been sent as 'smart' (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

    + Body

            {
                "status": "SUCCESS",
                "data": {
                    "prospect": {
                        "id": "SXYwOGRFczg5aUEwc1hTZWFUc2VIdz09",
                        "title": "Mr",
                        "firstName": "Pentwazz Stavea",
                        "surname": "Kenj",
                        "classification": "smart",
                        "primaryTelephoneNumber": {
                            "number": "07404669698",
                            "type": null
                        },
                        "email": "sakthi@bgdigitaltest.co.uk",
                        "correspondenceAddress": {
                            "address": null,
                            "houseNumber": "67",
                            "flatNumber": null,
                            "houseName": null,
                            "addressLine1": "Beresford Avenue",
                            "addressLine2": null,
                            "postalTown": "Surbiton",
                            "county": "SURREY",
                            "postcode": "KT5 9LH",
                            "MPAN": null,
                            "MPRN": null
                        },
                        "smartMeterInterest": false
                    }
                },
                "errors": [],
                "meta": {
                    "prospectToken": "6997bc57-4f6a-543d-96ba-8eacb65400f7"
                }
            }
            
+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "prospect": {
                        "id": "SXYwOGRFczg5aUEwc1hTZWFUc2VIdz09",
                        "title": "Mr",
                        "firstName": "Pentwazz Stavea",
                        "surname": "Kenj",
                        "primaryTelephoneNumber": {
                            "number": "07404669698",
                            "type": null
                        },
                        "email": "sakthi@bgdigitaltest.co.uk",
                        "correspondenceAddress": {
                            "address": null,
                            "houseNumber": "67",
                            "flatNumber": null,
                            "houseName": null,
                            "addressLine1": "Beresford Avenue",
                            "addressLine2": null,
                            "postalTown": "Surbiton",
                            "county": "SURREY",
                            "postcode": "KT5 9LH",
                            "MPAN": null,
                            "MPRN": null
                        },
                        "smartMeterInterest": false
                    }
                },
                "errors": [],
                "meta": {
                    "prospectToken": "6997bc57-4f6a-543d-96ba-8eacb65400f7"
                }
            }

+ Request Case 2:  When the classification value been sent as 'chi' (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

    + Body

            {
                "prospect": {
                    "title": "Mr",
                    "firstName": "Pentwazz Stavea",
                    "surname": "Kenj",
                    "email": "sakthi@bgdigitaltest.co.uk",
                    "classification": "chi",
                    "primaryTelephoneNumber": {
                        "number": "07404669698"
                    },
                    "correspondenceAddress": {
                        "houseNumber": "67",
                        "flatNumber": null,
                        "houseName": null,
                        "addressLine1": "Beresford Avenue",
                        "addressLine2": null,
                        "postalTown": "Surbiton",
                        "county": "SURREY",
                        "postcode": "KT5 9LH"
                    }
                }
            }
            
+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "prospect": {
                        "id": "8fbe249f-09b3-5649-b512-08bd3fa3fc56",
                        "title": "Mr",
                        "firstName": "Pentwazz Stavea",
                        "surname": "Kenj",
                        "primaryTelephoneNumber": {
                            "number": "07404669698",
                            "type": null
                        },
                        "email": "sakthi@bgdigitaltest.co.uk",
                        "correspondenceAddress": {
                            "address": null,
                            "houseNumber": "67",
                            "flatNumber": null,
                            "houseName": null,
                            "addressLine1": "Beresford Avenue",
                            "addressLine2": null,
                            "postalTown": "Surbiton",
                            "county": "SURREY",
                            "postcode": "KT5 9LH",
                            "MPAN": null,
                            "MPRN": null
                        },
                        "smartMeterInterest": null,
                        "classification": "chi"
                    }
                },
                "errors": [],
                "meta": {}
            }

+ Response 400 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "firstName",
                        "message": "error.client.firstName.blank"
                    }
                ],
                "meta": {}
            }

+ Response 403 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "prospect",
                        "message": "error.server.prospect.notcreated"
                    }
                ],
                "meta": {}
            }
            
+ Response 400 (application/json)
            
            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "classification",
                        "message": "error.client.classification.blank"
                    }
                ],
                "meta": {}
            }
            
+ Response 400 (application/json)
            
            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "classification",
                        "message": "error.client.classification.invalid"
                    }
                ],
                "meta": {}
            }

### Modify prospect [PUT /prospects/{id}]

+ Parameters

 + id (string) - Prospect id

+ Request (application/json)

    + Headers

            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

    + Body
    
            {
                "prospect": {
                    "title": "Mr",
                    "firstName": "Pentwazz Stavea",
                    "surname": "Kenj",
                    "email": "sakthi@bgdigitaltest.co.uk",
                    "smartMeterInterest": true,
                    "classification": "smart",
                    "primaryTelephoneNumber": {
                        "number": "07404669698"
                    },
                    "correspondenceAddress": {
                        "houseNumber": "67",
                        "flatNumber": null,
                        "houseName": null,
                        "addressLine1": "Beresford Avenue",
                        "addressLine2": null,
                        "postalTown": "Surbiton",
                        "county": "SURREY",
                        "postcode": "KT5 9LH"
                    }
                },
                "meta": {
                    "prospectToken": "a1045c92-3828-5619-b845-145904e0768b"
                }
            }   
            
+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "prospect": {
                        "id": "8fbe249f-09b3-5649-b512-08bd3fa3fc56",
                        "title": "Mr",
                        "firstName": "Pentwazz Stavea",
                        "surname": "Kenj",
                        "email": "sakthi@bgdigitaltest.co.uk",
                        "smartMeterInterest": "true",
                        "classification": "smart",
                        "primaryTelephoneNumber": {
                            "number": "07404669698"
                        },
                        "correspondenceAddress": {
                            "houseNumber": "67",
                            "flatNumber": null,
                            "houseName": null,
                            "addressLine1": "Beresford Avenue",
                            "addressLine2": null,
                            "postalTown": "Surbiton",
                            "county": "SURREY",
                            "postcode": "KT5 9LH"
                        }
                    },
                    "errors": [],
                    "meta": {}
                }
            }
            
+ Response 400 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "meta",
                        "message": "error.prospectinfo.invalid"
                    }
                ],
                "meta": {}
            }
            
+ Response 403 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "tokenKey",
                        "message": "error.client.token.invalid"
                    }
                ],
                "meta": {}
            }
            
+ Response 304 (application/json)

+ Response 400 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "prospect",
                        "message": "error.client.prospect.modificationNotAllowed"
                    }
                ],
                "meta": {}
            }

+ Response 400 (application/json)            
            
            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "prospect",
                        "message": "error.server.prospectId.empty"
                    }
                ],
                "meta": {}
            }
            
+ Response 400 (application/json)            
            
            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "prospect",
                        "message": "error.server.prospectId.notMatching"
                    }
                ],
                "meta": {}
            }
            
+ Response 403 (application/json)            
            
            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "prospect",
                        "message": "error.server.prospectId.invalid"
                    }
                ],
                "meta": {}
            }

+ Response 403 (application/json)            
            
            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "classification",
                        "message": "error.server.classification.invalid"
                    }
                ],
                "meta": {}
            }
