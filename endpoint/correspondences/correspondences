## Group Correspondences

## Correspondences [/correspondences]
Correspondences endpoint allows you to list / view correspondences for a given account number and query type using `ICV`.

#### Correspondence
Correspondence as a resource represents following information

| Property | Type | As request | As response | Description |
| :-------------------- | :---------- | :---------- | :---------- | ------------------------------------------------------------ |
| id | string | `Not Applicable` | `Returned always` | Unique Id to represent the document with pattern of document type, account number and document id. |
| date | string | `Not Applicable` | `Returned always` | Date of the document generated. |
| subject | string | `Not Applicable` | `Returned always` | Subject of the document. |
| read | boolean | `Not Applicable` | `Returned always` | Read status of the document, will be used for view correspondences.  |
| fuel | string | `Not Applicable` | `Returned always` | Fuel type of the document, will be used for Annual summary. |
| description | string | `Not Applicable` | `Returned always` | Correspondence description of the document, will be used for view CP12 certificates. |
| links | Array of object | `Not Applicable` | `Returned always` | Download link for the correspondence if it's eligible for download. |
| energyAccount | string | `Not Applicable` | `Returned always` | Energy account number to which the document is linked, if available. |
| servicesAccount | string | `Not Applicable` | `Returned always` | Services account number to which the document is linked, if available. |



### Retrieve specific correspondences for an account  [GET /correspondences{?account,documentType}]

+ Parameters

    + account: 12345678 (string,required) - Account Number
    + documentType: service-correspondence (string,required) - Query type of the documents to be retrieved. values will be `landlord-gas-safety-certificate`, `service-correspondence`.

+ Request

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "correspondences": [
                        {
                            "id": "AS-911000155091-0903112a826f844a",
                            "date": "2015-09-11T14:00:00+0100",
                            "subject": "Welcome to HomeCare Online",
                            "read": false,
                            "fuel": null,
                            "description": "",
                            "links": null,
                            "energyAccount": null,
                            "servicesAccount": "911000155091"
                        },
                        {
                            "id": "AS-911000155091-0903112a826f844a",
                            "date": "2015-11-12T14:00:00+0000",
                            "subject": "Welcome to HomeCare Online",
                            "read": false,
                            "fuel": null,
                            "description": "",
                            "links": {
                                "download": "/api/secure/correspondences/AS-911000155091-0903112a826f844a/download"
                            },
                            "energyAccount": null,
                            "servicesAccount": "911000155091"
                        }
                    ]
                },
                "errors": [],
                "meta": {}
            }

+ Request 'Customer not authenticated'

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 401 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "authorize",
                        "message": "access_denied"
                    }
                ],
                "meta": {}
            }

+ Request 'Input validation'

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 400 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "documentType",
                        "message": "error.client.documentType.invalid"
                    }
                ],
                "meta": {}
            }

+ Request 'Account number not associated to logged in customer'

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 403 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "account",
                        "message": "error.client.account.invalid"
                    }
                ],
                "meta": {}
            }

+ Request 'No correspondence available for the account'

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 404 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "correspondences",
                        "message": "error.correspondences.notFound"
                    }
                ],
                "meta": {}
            }

+ Request 'Error from backend'

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 500 (application/json)

            {
                "status": "ERROR",
                "data": {}
                "errors": [
                    {
                        "code": "system",
                        "message": "error.system.unexpected.error"
                    }
                ],
                "meta": {}
            }

### Retrieve specific correspondence  [GET /correspondences/{id}]

+ Parameters

    + id: 12345678 (string,required) - Correspondence id

+ Request

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "correspondence": {
                        "id": "AS-911000155091-0903112a826f844a",
                        "date": "2015-09-11T14:00:00+0100",
                        "subject": "Welcome to HomeCare Online",
                        "read": false,
                        "fuel": null,
                        "destination": "",
                        "context": "",
                        "links": {
                            "download": "/api/secure/correspondences/AS-911000155091-0903112a826f844a/download"
                        },
                        "energyAccount": null,
                        "servicesAccount": "911000155091"
                    }
                },
                "errors": [],
                "meta": {}
            }

+ Request 'Customer not authenticated'

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 401 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "authorize",
                        "message": "access_denied"
                    }
                ],
                "meta": {}
            }

+ Request 'Input validation'

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 400 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "identifier",
                        "message": "error.client.identifier.invalid"
                    }
                ],
                "meta": {}
            }

+ Request 'Account not available for customer'

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 403 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "account",
                        "message": "error.client.account.invalid"
                    }
                ],
                "meta": {}
            }

+ Request 'No correspondence available for the correspondence identifier'

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 404 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "correspondences",
                        "message": "error.correspondences.notFound"
                    }
                ],
                "meta": {}
            }

+ Request 'Error form backend'

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 500 (application/json)

            {
                "status": "ERROR",
                "data": {}
                "errors": [
                    {
                        "code": "system",
                        "message": "error.system.unexpected.error"
                    }
                ],
                "meta": {}
            }

### Download specific correspondence  [GET /correspondences/{id}/download]

+ Parameters

    + id: 12345678 (string,required) - Correspondence id

+ Request

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 200 (application/pdf)

+ Request 'Customer not authenticated'

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 401 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "authorize",
                        "message": "access_denied"
                    }
                ],
                "meta": {}
            }

+ Request 'Input validation'

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 400 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "identifier",
                        "message": "error.client.identifier.invalid"
                    }
                ],
                "meta": {}
            }

+ Request 'Account not available for customer'

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 403 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "account",
                        "message": "error.client.account.invalid"
                    }
                ],
                "meta": {}
            }

+ Request 'No correspondence available for the correspondence identifier'

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 404 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "correspondences",
                        "message": "error.correspondences.notFound"
                    }
                ],
                "meta": {}
            }

+ Request 'Error from backend'

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 500 (application/json)

            {
                "status": "ERROR",
                "data": {}
                "errors": [
                    {
                        "code": "system",
                        "message": "error.system.unexpected.error"
                    }
                ],
                "meta": {}
            }
