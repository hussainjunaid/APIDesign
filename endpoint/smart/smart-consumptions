## Smart Consumption [/smart-consumptions]
The smart consumptions endpoint is used to retrieve consumption details of the smart customer. Responses from this endpoint will be returned in PDF format for successful response.

This endpoint returns eligible preference list for the given account number. The values of this list will be either one of the below options.
 * `daily`, `weekly`, `monthly` and `yearly`.
 * `monthly` and `yearly`.
 * `total-usage` for no dropdown options.

### Retrieve smart consumption for an account  [GET /smart-consumptions/eligible-preferences{?account}]
+ Parameters

    + account: 123456 (string,required) - Account Number

+ Request 'SUCCESS' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "eligiblePreferences": [
                        "daily",
                        "weekly",
                        "monthly",
                        "yearly"
                    ]
                },
                "errors": {},
                "meta": {}
            }

+ Request 'Invalid access token used for geting eligible preference list' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 401 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "authorize",
                        "message": "access_denied"
                    }
                ],
                "meta": {}
            }

+ Request 'Invalid account number' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 400 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "accountNumber",
                        "message": "error.client.accountNumber.invalid"
                   }
                ],
                "meta": {}
            }

+ Request 'Account number not associated to logged in customer' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 403 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "account",
                        "message": "error.client.account.invalid"
                    }
                ],
                "meta": {}
            }

+ Request 'Non smart meter account accessed' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 400 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "smartConsumption",
                        "message": "error.server.smartMeterAccount.notFound"
                    }
                ],
                "meta": {}
            }

### Retrieve smart consumption for an account with view preference  [GET /smart-consumptions/eligible-preferences{?account,viewPreference}]

+ Parameters

    + account: 123456 (string,required) - Account Number
    + viewPreference: daily (string,required) -  eligible preference - Retrieve consumption details of the given smart meter customer up to 24 months in PDF format.

+ Request 'SUCCESS' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 200 (application/pdf)

            {
            }

+ Request 'Customer is not authenticated' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 401 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "authorize",
                        "message": "access_denied"
                    }
                ],
                "meta": {}
            }

+ Request 'Invalid account number' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 400 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "accountNumber",
                        "message": "error.client.accountNumber.invalid"
                    }
                ],
                "meta": {}
            }

+ Request 'Account number not associated to logged in customer' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 403 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "account",
                        "message": "error.client.account.invalid"
                    }
                ],
                "meta": {}
            }

+ Request 'Non smart meter account accessed' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 400 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "smartConsumption",
                        "message": "error.server.smartMeterAccount.notFound"
                    }
                ],
                "meta": {}
            }

+ Request 'Invalid view preference' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 400 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "smartConsumption",
                        "message": "error.client.viewPreference.invalid"
                    }
                ],
                "meta": {}
            }

+ Request 'Closed account customer accessed this endpoint' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 400 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "smartConsumption",
                        "message": "error.server.closedAccount.notSupported"
                    }
                ],
                "meta": {}
            }

+ Request 'Get last meter or MDUS service failed' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 500 (application/json)

            {
                "status": "ERROR",
                "data": {}
                "errors": [
                    {
                        "code": "smartConsumption",
                        "message": "error.server.mdus.failed"
                    }
                ],
                "meta": {}
            }

+ Request 'Error from back end systems' (application/json)

    + Headers

            Authorization: Bearer {accessToken}
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 500 (application/json)

            {
                "status": "ERROR",
                "data": {}
                "errors": [
                    {
                        "code": "system",
                        "message": "error.system.unexpected.error"
                    }
                ],
                "meta": {}
            }
