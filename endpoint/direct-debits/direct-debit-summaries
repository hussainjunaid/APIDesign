## Direct Debits Summaries Collection [/direct-debit-summaries]

Direct debit summaries endpoint allows you to list / view all the customer payment scheme explanation information of the logged in fixed direct debit customer. Responses from this endpoint will be returned in JSON format only.

#### Direct debit summary 
Direct debit summary as a resource represents following information

| Property | Type | As request | As response | Description |
| :-------------------- | :---------- | :---------- | :---------- | ------------------------------------------------------------ |
| id | string | `Not Applicable` | `Returned always` |  Account number of the direct debit contract, to establish relationship with account | 
| account | string | `Not Applicable` | `Returned always` |  Account number of the direct debit contract, to establish relationship with account |  
| eventType| string | `Not Applicable` | `Returned always` |  An Integer is returned to indicate the event type. `1- Set up`, `2- interim`, `3-Rapid`, `4-Simulation Interim`, `5 - Periodic` |
| newInstalmentAmount | double | `Not Applicable` | `Returned always` |  Variable to store customer's installment amount after re-assessment |
| oldInstalmentAmount | double | `Not Applicable` | `Returned always` |  Variable to store customer's installment amount before re-assessment |
| recommendedInstalmentAmount | double | `Not Applicable` | `Returned only if it’s a honored scenario` | Variable to hold the proposed installment amount |
| reassessmentType | String | `Not Applicable` | `Returned always` |  Variable to determine if the re-assessment is `full`/`simple`/`none` |
| nextPaymentDate | string | `Not Applicable` | `Returned always` |  Next payment date of the direct debit contract |
| nextPaymentAmount | double | `Not Applicable` | `Returned always` |  Next payment amount of the direct debit contract |
| instalmentChangeHonoured | boolean | `Not Applicable` | `Returned always` |  The customer’s choice of payment for the installment has been honored or not |
| previousReassessmentDate | string | `Not Applicable` | `Returned always` |  Date the review was triggered |
| newInstalmentEffectiveDate | string | `Not Applicable` | `Returned always` |  Variable for storing date when the new installment date will take effect |
| contracts | Collection of Contracts | `Not Applicable` | `Returned always` | Contract details of the given account |

#### Contract

Contract is represented as follows

| Property | Type | As request | As response | Description |
| :-------------------- | :---------- | :---------- | :---------- | ------------------------------------------------------------ |
| contractId | string | `Not Applicable` | `Returned always` |  Installment date in `dd/MM/yyyy` format |
| instalmentChangeHonoured | boolean | `Not Applicable` | `Returned always` |  The customer’s choice of payment for the installment has been honored or not in contract level. |
| amountChanged | boolean | `Not Applicable` | `Returned always` |  Indicates if the amount has changed after re-assessment.  | 
| proposedAmount | double | `Not Applicable` | `Returned if the contract is honored` | Amount recommended after re-assessment. |
| adoptedAmount | double | `Not Applicable` | `Returned if the contract is honored` | Amount used to honor the previous change |

### GET All Direct debit summaries [GET /direct-debit-summaries]

+ Request

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "directDebitSummaries": [
                        {
                            "id": "851001111192-2403",
                            "account": "851001111192",
                            "nextPaymentAmount": 81.32,
                            "nextPaymentDate": "01/12/2016",
                            "previousReassessmentDate": "03/03/2016",
                            "eventType": "5",
                            "oldInstalmentAmount": 104.54,
                            "newInstalmentAmount": 81.32,
                            "newInstalmentEffectiveDate": "01/04/2016",
                            "instalmentChangeHonoured": false,
                            "reassessmentType": "full",
                            "recommendedInstalmentAmount": 0,
                            "contracts": null
                        }
                    ]
                },
                "errors": [],
                "meta": {}
            }
            
### GET Direct debit summaries for specific accounts [GET /direct-debit-summaries{?accountNumber*}]
+ Parameters

    + accountNumber (string) - Account number for which the direct debit summary is required
    
+ Request

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "directDebitSummaries": [
                        {
                            "id": "851001111192-2403",
                            "account": "851001111192",
                            "nextPaymentAmount": 81.32,
                            "nextPaymentDate": "01/12/2016",
                            "previousReassessmentDate": "03/03/2016",
                            "eventType": "5",
                            "oldInstalmentAmount": 104.54,
                            "newInstalmentAmount": 81.32,
                            "newInstalmentEffectiveDate": "01/04/2016",
                            "instalmentChangeHonoured": false,
                            "reassessmentType": "full",
                            "recommendedInstalmentAmount": 0,
                            "contracts": null
                        }
                    ]
                },
                "errors": [],
                "meta": {}
            }

+ Request 'Customer is not authenticated'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526
            
+ Response 401 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "authorize",
                        "message": "access_denied"
                    }
                ],
                "meta": {}
            }

+ Request 'Invalid account number'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526
            
+ Response 401 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "accountNumber",
                        "message": "error.client.accountNumber.invalid"
                    }
                ],
                "meta": {}
            }

+ Request 'Account is not available for the customer'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526
            
+ Response 403 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "account",
                        "message": "error.client.account.invalid"
                    }
                ],
                "meta": {}
            }
            
+ Request 'Fixed direct debit account is not available for the customer'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526
            
+ Response 404 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "directdebit",
                        "message": "error.client.fixedDirectDebit.notFound"
                    }
                ],
                "meta": {}
            }
            
+ Request 'If any of the CPS Summary and CPS Installment services are down'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526
            
+ Response 500 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "service",
                        "message": "error.system.pi.operation.fail"
                    }
                ],
                "meta": {}
            }

+ Request 'If any of the service results for CPS Summary and CPS Installment are not returned'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526
            
+ Response 404 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "directDebitSummary",
                        "message": "error.directDebit.summary.notFound"
                    }
                ],
                "meta": {}
            }
            
### GET specific Direct debit summary using id  [GET /direct-debit-summaries/{id}]
+ Parameters

    + id (string) - id for which the direct debit summary is required
    
+ Request

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526

+ Response 200 (application/json)

            {
                "status": "SUCCESS",
                "data": {
                    "directDebitSummaries": [
                        {
                            "id": "851001111192-2403",
                            "account": "851001111192",
                            "nextPaymentAmount": 81.32,
                            "nextPaymentDate": "01/12/2016",
                            "previousReassessmentDate": "03/03/2016",
                            "eventType": "5",
                            "oldInstalmentAmount": 104.54,
                            "newInstalmentAmount": 81.32,
                            "newInstalmentEffectiveDate": "01/04/2016",
                            "instalmentChangeHonoured": false,
                            "reassessmentType": "full",
                            "recommendedInstalmentAmount": 0,
                            "contracts": null
                        }
                    ]
                },
                "errors": [],
                "meta": {}
            }

+ Request 'Customer is not authenticated'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526
            
+ Response 401 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "authorize",
                        "message": "access_denied"
                    }
                ],
                "meta": {}
            }

+ Request 'Invalid account number'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526
            
+ Response 401 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "accountNumber",
                        "message": "error.client.accountNumber.invalid"
                    }
                ],
                "meta": {}
            }

+ Request 'Account is not available for the customer'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526
            
+ Response 403 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "account",
                        "message": "error.client.account.invalid"
                    }
                ],
                "meta": {}
            }
            
+ Request 'Invalid direct debit summary id'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526
            
+ Response 404 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "directDebit",
                        "message": "error.client.account.notFound"
                    }
                ],
                "meta": {}
            }
            
+ Request 'Fixed direct debit account is not available for the customer'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526
            
+ Response 404 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "directdebit",
                        "message": "error.client.fixedDirectDebit.notFound"
                    }
                ],
                "meta": {}
            }

+ Request 'If any of the CPS Summary and CPS Installment services are down'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526
            
+ Response 500 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "service",
                        "message": "error.system.pi.operation.fail"
                    }
                ],
                "meta": {}
            }
            
+ Request 'If any of the service results for CPS Summary and CPS Installment are not returned'

    + Headers

            Authorization: Bearer accesstoken
            cid: 05e230bf-a9cf-4b31-bc54-d3a995f62526
            
+ Response 404 (application/json)

            {
                "status": "FAIL",
                "data": {},
                "errors": [
                    {
                        "code": "directDebitSummary",
                        "message": "error.directDebit.summary.notFound"
                    }
                ],
                "meta": {}
            }

